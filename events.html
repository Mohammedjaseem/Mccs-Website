<!DOCTYPE html>
<html lang="zxx">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" href="assets/css/bootstrap.min.css" />
    <link rel="stylesheet" href="assets/css/meanmenu.css" />
    <link rel="stylesheet" href="assets/css/owl.carousel.min.css" />
    <link rel="stylesheet" href="assets/css/owl.theme.default.min.css" />
    <link rel="stylesheet" href="assets/css/magnific-popup.css" />
    <link rel="stylesheet" href="assets/css/flaticon.css" />
    <link rel="stylesheet" href="assets/css/remixicon.css" />
    <link rel="stylesheet" href="assets/css/odometer.min.css" />
    <link rel="stylesheet" href="assets/css/aos.css" />
    <link rel="stylesheet" href="assets/css/style.css" />
    <link rel="stylesheet" href="assets/css/dark.css" />
    <link rel="stylesheet" href="assets/css/responsive.css" />
    <link rel="icon" type="image/png" href="assets/images/favicon.png" />
    <link
      href="https://cdn.jsdelivr.net/npm/sweetalert2@11.1.7/dist/sweetalert2.min.css"
      rel="stylesheet"
    />

    <title>Events | MCCS</title>
    <style>
      #notification-container li {
        list-style-type: none;
        margin: 0px;
        color: white;
        font-weight: 600;
      }
      .notification-list {
        display: inline-block;
        max-height: 20px;
        overflow: hidden;
        position: relative;
        max-height: 20px;
      }
      ul.notification-list {
        margin-bottom: 0px !important;
      }
      @keyframes marquee-up {
        0% {
          transform: translateY(0);
        }
        100% {
          transform: translateY(-100%);
        }
      }
      .loading-animation {
        border: 4px solid #f3f3f3;
        border-top: 4px solid #084f8c;
        border-radius: 50%;
        width: 60px;
        height: 60px;
        animation: spin 2s linear infinite;
        margin: 20px auto;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      /* Events Page Styles */
      .events-header {
        text-align: center;
        margin-bottom: 40px;
      }
      .events-header h2 {
        font-size: 36px;
        margin-bottom: 15px;
        color: #084f8c;
      }
      .events-header p {
        font-size: 18px;
        color: #666;
        max-width: 800px;
        margin: 0 auto;
      }

      .event-card {
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
        margin-bottom: 30px;
        background: #fff;
      }
      .event-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
      }
      .event-img {
        height: 250px;
        width: 100%;
        object-fit: cover;
      }
      .event-content {
        padding: 20px;
      }
      .event-title {
        font-size: 20px;
        margin-bottom: 10px;
        color: #084f8c;
      }
      .event-date {
        color: #666;
        font-size: 14px;
        margin-bottom: 15px;
        display: flex;
        align-items: center;
      }
      .event-date i {
        margin-right: 5px;
      }
      .event-description {
        color: #555;
        margin-bottom: 15px;
      }
      .event-footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding-top: 15px;
        border-top: 1px solid #eee;
      }
      .event-department {
        background: #084f8c;
        color: white;
        padding: 3px 10px;
        border-radius: 20px;
        font-size: 12px;
      }
      .event-coordinator {
        font-size: 12px;
        color: #666;
      }

      .add-event-btn {
        background: #084f8c;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        font-weight: 600;
        display: flex;
        align-items: center;
        margin: 0 auto 40px;
        transition: all 0.3s ease;
      }
      .add-event-btn:hover {
        background: #063b6b;
        transform: translateY(-2px);
      }
      .add-event-btn i {
        margin-right: 8px;
      }

      /* Filter Styles */
      .event-filters {
        display: flex;
        justify-content: center;
        margin-bottom: 30px;
        flex-wrap: wrap;
      }
      .filter-btn {
        background: #f8f9fa;
        border: none;
        padding: 8px 20px;
        margin: 5px;
        border-radius: 30px;
        cursor: pointer;
        transition: all 0.3s ease;
      }
      .filter-btn:hover,
      .filter-btn.active {
        background: #084f8c;
        color: white;
      }

      /* Modal Styles */
      .modal-content {
        border-radius: 15px;
        overflow: hidden;
      }
      .modal-header {
        color: white;
        border-bottom: 1px solid #e9ecef;
      }
      .modal-body {
        padding: 30px;
      }
      .preview-image-container {
        margin-top: 15px;
        text-align: center;
      }
      .preview-image {
        max-width: 100%;
        max-height: 200px;
        border-radius: 5px;
      }

      @media (max-width: 767px) {
        .event-card {
          margin-bottom: 20px;
        }
        .event-img {
          height: 200px;
        }
      }
    </style>
  </head>
  <body>
    <div class="preloader-area">
      <div class="spinner">
        <div class="inner">
          <div class="disc"></div>
          <div class="disc"></div>
          <div class="disc"></div>
        </div>
      </div>
    </div>

    <!-- Header Section -->
    <div class="top-header-area d-none d-lg-block">
      <div class="container">
        <div class="row align-items-center">
          <div class="col-lg-4 col-md-4">
            <div class="header-right-content">
              <div class="list">
                <ul style="margin-left: 4rem">
                  <li>
                    <a href="mailto:infomccs@macity.edu.in"
                      ><i
                        class="ri-mail-fill"
                        style="color: #3498db; margin-right: 5px"
                      ></i>
                      infomccs@macity.edu.in</a
                    >
                  </li>
                  <li>
                    <a href="tel:+917034999995"
                      ><i
                        class="ri-phone-fill"
                        style="color: #2ecc71; margin-right: 5px"
                      ></i>
                      +91 7034 999 995</a
                    >
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <div class="col-lg-8 col-md-8">
            <div class="header-left-content">
              <!-- Search container moved to the left -->
              <div class="search-container">
                <div class="search-box">
                  <input
                    type="text"
                    class="search-input"
                    placeholder="Search"
                    id="globalSearch"
                  />
                  <button class="search-btn">
                    <i class="ri-search-line"></i>
                  </button>
                </div>
                <div class="search-results" id="searchResults"></div>
              </div>
              <ul
                style="margin: 0px; padding-left: 20px; color: #fff"
                class="notification-list notification"
                id="notification-container"
              ></ul>
              <a
                class="top-bar-button"
                href="https://www.mccsconnect.in/"
                target="_blank"
                >MCCS Connect</a
              >
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="navbar-area nav-bg-1">
      <div class="mobile-responsive-nav">
        <div class="container">
          <div class="mobile-responsive-menu">
            <div class="logo">
              <a href="index.html">
                <img
                  src="assets/images/logo.png"
                  class="main-logo"
                  alt="logo"
                />
                <img
                  src="assets/images/white-logo.png"
                  class="white-logo"
                  alt="logo"
                />
              </a>
            </div>
          </div>
        </div>
      </div>
      <div class="desktop-nav">
        <div class="container">
          <nav class="navbar navbar-expand-md navbar-light">
            <a class="navbar-brand" href="index.html">
              <img
                src="assets/images/white-logo.png"
                class="main-logo"
                alt="logo"
              />
            </a>
            <div
              class="collapse navbar-collapse mean-menu"
              id="navbarSupportedContent"
            >
              <ul class="navbar-nav ms-auto">
                <li class="nav-item">
                  <a href="index.html" class="nav-link"> Home </a>
                </li>
                <li class="nav-item">
                  <a class="nav-link dropdown-toggle"> About Us </a>
                  <ul class="dropdown-menu">
                    <li class="nav-item">
                      <a href="about-overview.html" class="nav-link"
                        >Overview</a
                      >
                    </li>
                    <li class="nav-item">
                      <a href="about-vision-mission.html" class="nav-link"
                        >Vision & Mission</a
                      >
                    </li>
                    <li class="nav-item">
                      <a class="nav-link dropdown-toggle"> Accreditation</a>
                      <ul class="dropdown-menu">
                        <li class="nav-item">
                          <a href="naac-qualitative.html" class="nav-link"
                            >NAAC-Qualitative</a
                          >
                        </li>
                        <li class="nav-item">
                          <a href="naac-quantitative.html" class="nav-link"
                            >NAAC-Quantitative</a
                          >
                        </li>
                      </ul>
                    </li>
                    <li class="nav-item">
                      <a href="about-principal.html" class="nav-link"
                        >Principal</a
                      >
                    </li>
                    <li class="nav-item">
                      <a href="about-board.html" class="nav-link"
                        >Board of Directors</a
                      >
                    </li> 
                    <li class="nav-item">
                      <a href="non-teaching.html" class="nav-link"
                        >Non Teaching Staffs</a
                      >
                    </li>
                  </ul>
                </li>
                <li class="nav-item">
                  <a class="nav-link dropdown-toggle"> Admissions </a>
                  <ul class="dropdown-menu">
                    <li class="nav-item">
                      <a href="admission-process.html" class="nav-link"
                        >Admission Process</a
                      >
                    </li>
                    <li class="nav-item">
                      <a href="courses.html" class="nav-link"
                        >Courses Offered</a
                      >
                    </li>
                  </ul>
                </li>
                <li class="nav-item">
                  <a class="nav-link dropdown-toggle"> Academics </a>
                  <ul class="dropdown-menu">
                    <li class="nav-item">
                      <a href="academic-programmes.html" class="nav-link"
                        >Academic Programmes</a
                      >
                    </li>
                    <li class="nav-item">
                      <a class="nav-link dropdown-toggle">Departments</a>
                      <ul class="dropdown-menu">
                        <li class="nav-item">
                          <a href="food-technology.html" class="nav-link"
                            >Food Technology</a
                          >
                        </li>
                        <li class="nav-item">
                          <a href="biochemistry.html" class="nav-link"
                            >Biochemistry</a
                          >
                        </li>
                        <li class="nav-item">
                          <a href="english.html" class="nav-link">BA English</a>
                        </li>
                        <li class="nav-item">
                          <a href="computer-application.html" class="nav-link"
                            >BCA</a
                          >
                        </li>
                        <li class="nav-item">
                          <a href="microbiology.html" class="nav-link"
                            >Microbiology</a
                          >
                        </li>
                        <li class="nav-item">
                          <a href="psychology.html" class="nav-link"
                            >Psychology</a
                          >
                        </li>
                        <li class="nav-item">
                          <a
                            href="department-of-languages.html"
                            class="nav-link"
                            >Department of Languages</a
                          >
                        </li>
                      </ul>
                    </li>
                    <li class="nav-item">
                      <a href="facilities.html" class="nav-link">Facilities</a>
                    </li>
                    <li class="nav-item">
                      <a href="internal-marks.html" class="nav-link"
                        >Internal Marks</a
                      >
                    </li>
                    <li class="nav-item">
                      <a href="academic-calendar.html" class="nav-link"
                        >Academic Calendar</a
                      >
                    </li>
                    <li class="nav-item">
                      <a href="library.html" class="nav-link">Library</a>
                    </li>
                    <li class="nav-item">
                      <a href="achievements.html" class="nav-link"
                        >Achievements</a
                      >
                    </li>
                  </ul>
                </li>
                <li class="nav-item">
                  <a class="nav-link dropdown-toggle active"> Students Zone </a>
                  <ul class="dropdown-menu">
                    <li class="nav-item">
                      <a class="nav-link dropdown-toggle active">
                        Activities
                      </a>
                      <ul class="dropdown-menu">
                        <li class="nav-item">
                          <a href="news-page.html" class="nav-link"
                            >MCCS News</a
                          >
                        </li>
                        <li class="nav-item">
                          <a href="events.html" class="nav-link active"
                            >Events</a
                          >
                        </li>
                      </ul>
                    </li>
                    <li class="nav-item">
                      <a href="clubs.html" class="nav-link">Clubs</a>
                    </li>
                    <li class="nav-item">
                      <a href="women-cell.html" class="nav-link">Women Cell</a>
                    </li>
                  </ul>
                </li>
                <li class="nav-item">
                  <a href="gallery.html" class="nav-link">Gallery</a>
                </li>
                <li class="nav-item">
                  <a href="careers.html" class="nav-link">Careers</a>
                </li>
                <li class="nav-item">
                  <a href="contact-us.html" class="nav-link">Contact Us</a>
                </li>
              </ul>
            </div>
          </nav>
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <div class="events-area pt-70 pb-70">
      <div class="container">
        <div class="events-header">
          <h2>Our Events</h2>
          <p>Stay updated with all the exciting events happening at MCCS</p>
        </div>

        <button
          class="add-event-btn"
          data-bs-toggle="modal"
          data-bs-target="#addEventModal"
        >
          <i class="ri-add-circle-line"></i> Add Event
        </button>

        <div id="loadingAnimation" class="loading-animation"></div>
        <div class="row" id="events-container"></div>
      </div>
    </div>

    <!-- Add Event Modal -->
    <div
      class="modal fade"
      id="addEventModal"
      tabindex="-1"
      aria-labelledby="addEventModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="addEventModalLabel">Add New Event</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <form id="eventForm">
              <div class="form-group mb-3">
                <label for="eventTitle" class="form-label">Event Title*</label>
                <input
                  type="text"
                  class="form-control"
                  id="eventTitle"
                  required
                />
              </div>

              <div class="form-group mb-3">
                <label for="eventDescription" class="form-label"
                  >Description*</label
                >
                <textarea
                  class="form-control"
                  id="eventDescription"
                  rows="3"
                  required
                ></textarea>
              </div>

              <div class="row">
                <div class="col-md-6">
                  <div class="form-group mb-3">
                    <label for="eventDate" class="form-label"
                      >Event Date*</label
                    >
                    <input
                      type="date"
                      class="form-control"
                      id="eventDate"
                      required
                    />
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-group mb-3">
                    <label for="eventCoordinator" class="form-label"
                      >Coordinator Name*</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="eventCoordinator"
                      required
                    />
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-md-6">
                  <div class="form-group mb-3">
                    <label for="eventDepartment" class="form-label"
                      >Department*</label
                    >
                    <select class="form-control" id="eventDepartment" required>
                      <option value="">Select Department</option>
                      <option value="Food Technology">Food Technology</option>
                      <option value="Biochemistry">Biochemistry</option>
                      <option value="BA English">BA English</option>
                      <option value="BCA">BCA</option>
                      <option value="Microbiology">Microbiology</option>
                      <option value="Psychology">Psychology</option>
                      <option value="General">General</option>
                    </select>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-group mb-3">
                    <label for="eventAuthor" class="form-label"
                      >Your Name*</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="eventAuthor"
                      required
                    />
                  </div>
                </div>
              </div>

              <div class="form-group mb-3">
                <label for="eventImage" class="form-label">Event Poster*</label>
                <input
                  type="file"
                  class="form-control"
                  id="eventImage"
                  accept="image/*"
                  required
                />
                <div class="preview-image-container">
                  <img
                    id="eventImagePreview"
                    class="preview-image"
                    style="display: none"
                  />
                </div>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Close
            </button>
            <button type="button" class="btn btn-primary" id="saveEventBtn">
              Save Event
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="footer-area pt-70">
      <div class="container">
        <div class="row">
          <div class="col-lg-5 col-sm-6">
            <div class="footer-logo-area">
              <a href="index.html"
                ><img src="assets/images/white-logo.png" alt="Image"
              /></a>
              <p>
                Manoor - Chekanoor Road, <br />
                Manoor, Edappal, Malappuram, <br />
                Kerala 679578
              </p>
              <div class="contact-list">
                <ul>
                  <li>
                    <a href="tel:+917034999995">Phone: +91 7034 999 995</a>
                  </li>
                  <li>
                    <a href="mailto:infomccs@macity.edu.in" target="_blank"
                      ><span
                        class="__cf_email__"
                        data-cfemail="afcecbc2c6c1efdccec1da81cacbda"
                        >Mail: infomccs@macity.edu.in</span
                      ></a
                    >
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <div class="col-lg-2 col-sm-6">
            <div class="footer-widjet new-widget">
              <h3>Quick Links</h3>
              <div class="list">
                <ul>
                  <li><a href="gallery.html">Gallery</a></li>
                  <li><a href="facilities.html">Facilities</a></li>
                  <li><a href="library.html">Library</a></li>
                  <li><a href="events.html">Events</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="col-lg-2 col-sm-6">
            <div class="footer-widjet">
              <h3>Social Media</h3>
              <div class="list">
                <ul>
                  <li>
                    <a
                      href="https://www.facebook.com/profile.php?id=61575267401401"
                      target="_blank"
                      ><i class="flaticon-facebook" style="color: #4267b2"></i
                      >&nbsp;Facebook</a
                    >
                  </li>
                  <li>
                    <a
                      href="https://www.instagram.com/malabar_college_manoor/"
                      target="_blank"
                      ><i class="flaticon-instagram" style="color: #ff69b4"></i
                      >&nbsp;Instagram</a
                    >
                  </li>
                  <li>
                    <a
                      href="https://maps.app.goo.gl/4FQMpHruJVVh5eeT7"
                      target="_blank"
                      ><i class="ri-map-pin-line" style="color: #ffc107"></i
                      >&nbsp;Maps</a
                    >
                  </li>

                  <li>
                    <a
                      href="https://www.thecigworld.com/malabar-college-of-commerce-and-science/"
                      target="_blank"
                      ><i class="ri-google-fill" style="color: #34a853"></i
                      >&nbsp;Google</a
                    >
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <div class="col-lg-3 col-sm-6">
            <div class="footer-widjet">
              <h3>Location</h3>
              <div class="list">
                <iframe
                  width="100%"
                  height="300"
                  style="border: 0"
                  loading="lazy"
                  allowfullscreen
                  src="https://www.google.com/maps/embed/v1/place?q=place_id:ChIJPc1YxbC5pzsRqtCafmf8d68&key=AIzaSyBFw0Qbyq9zTFTd-tUY6dZWTgaQzuU17R8"
                ></iframe>
              </div>
            </div>
          </div>
        </div>
        <div class="shape">
          <img src="assets/images/shape-1.png" alt="Image" />
        </div>
      </div>
    </div>
    <div class="copyright-area">
      <div class="container">
        <div class="copyright">
          <div
            style="
              display: flex;
              flex-wrap: wrap;
              align-items: center;
              justify-content: space-between;
            "
          >
            <div class="col-lg-6 col-md-8">
              <div class="copy">
                <p>
                  Copyright &copy; 2025 MCCS | Developed by
                  <a href="https://connect.edentu.com/" target="_blank"
                    >Connect</a
                  >
                </p>
              </div>
            </div>
            <div>
              <p>Last updated on 06-05-2025</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="go-top">
      <i class="ri-arrow-up-s-line"></i>
      <i class="ri-arrow-up-s-line"></i>
    </div>

    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/jquery.meanmenu.js"></script>
    <script src="assets/js/owl.carousel.min.js"></script>
    <script src="assets/js/carousel-thumbs.min.js"></script>
    <script src="assets/js/jquery.magnific-popup.js"></script>
    <script src="assets/js/aos.js"></script>
    <script src="assets/js/odometer.min.js"></script>
    <script src="assets/js/appear.min.js"></script>
    <script src="assets/js/form-validator.min.js"></script>
    <script src="assets/js/contact-form-script.js"></script>
    <script src="assets/js/ajaxchimp.min.js"></script>
    <script src="assets/js/custom.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.1.7/dist/sweetalert2.all.min.js"></script>

    <script>
      // Notification functionality remains the same
      const apiUrl =
        "https://app.conext.in/Notifications/api/latest-mccs-top-bar-notification/";
      const notificationContainer = document.getElementById(
        "notification-container"
      );
      let notifications = [];
      let currentIndex = 0;

      async function fetchAndUpdateNotifications() {
        try {
          const response = await fetch(apiUrl);
          notifications = await response.json();
          updateNotification();
          setInterval(updateNotification, 4500);
        } catch (error) {
          console.error("Error fetching notifications:", error);
        }
      }

      function updateNotification() {
        if (notifications.length > 0) {
          const list = notificationContainer;
          list.innerHTML = `<li>${notifications[currentIndex].notification}</li>`;
          currentIndex = (currentIndex + 1) % notifications.length;
        }
      }

      fetchAndUpdateNotifications();

      // Events Page Functionality
      $(document).ready(function () {
        // Load events when page loads
        loadEvents();

        // Preview image when file is selected
        $("#eventImage").change(function () {
          const file = this.files[0];
          if (file) {
            const reader = new FileReader();
            reader.onload = function (e) {
              $("#eventImagePreview").attr("src", e.target.result).show();
            };
            reader.readAsDataURL(file);
          }
        });

        // Filter events
        $(".filter-btn").click(function () {
          $(".filter-btn").removeClass("active");
          $(this).addClass("active");

          const filter = $(this).data("filter");
          if (filter === "all") {
            $(".event-card").show();
          } else {
            $(".event-card").hide();
            $(`.event-card[data-type="${filter}"]`).show();
          }
        });

        // Save event
        $("#saveEventBtn").click(async function () {
          const title = $("#eventTitle").val();
          const description = $("#eventDescription").val();
          const date = $("#eventDate").val();
          const coordinator = $("#eventCoordinator").val();
          const department = $("#eventDepartment").val();
          const uploaded_by = $("#eventAuthor").val();
          const picture = $("#eventImage")[0];

          if (
            !title ||
            !description ||
            !date ||
            !coordinator ||
            !department ||
            !uploaded_by ||
            !picture.files.length
          ) {
            Swal.fire({
              icon: "error",
              title: "Error",
              text: "Please fill all required fields",
            });
            return;
          }

          const formData = new FormData();
          formData.append("title", title);
          formData.append("description", description);
          formData.append("date", date);
          formData.append("coordinator", coordinator);
          formData.append("department", department);
          formData.append("uploaded_by", uploaded_by);
          formData.append("picture", picture.files[0]);
          formData.append("org", "4");

          $("#loadingAnimation").show();

          try {
            const response = await fetch(
              "https://conext.in/static_site_apis/api/upload_event_images/",
              {
                method: "POST",
                body: formData,
                headers: {
                  Accept: "application/json",
                },
              }
            );

            if (!response.ok) {
              throw new Error("Failed to save event");
            }

            const result = await response.json();

            // Success handling
            $("#loadingAnimation").hide();
            $("#addEventModal").modal("hide");
            resetForm();

            Swal.fire({
              icon: "success",
              title: "Success!",
              text: "Event added successfully",
              timer: 2000,
              showConfirmButton: false,
            });

            // Reload events
            loadEvents();
          } catch (error) {
            $("#loadingAnimation").hide();
            Swal.fire({
              icon: "error",
              title: "Error",
              text: error.message,
            });
            console.error("Error saving event:", error);
          }
        });

        async function loadEvents() {
          $("#loadingAnimation").show();
          $("#events-container").empty();

          try {
            const response = await fetch(
              "https://conext.in/static_site_apis/api/get_event_images/4/",
              {
                method: "GET",
                headers: {
                  Accept: "application/json",
                },
              }
            );

            if (!response.ok) {
              throw new Error(`HTTP error! status: ${response.status}`);
            }

            const result = await response.json();
            const events = result.data;

            if (events.length === 0) {
              $("#events-container").html(
                "<p class='text-center'>No events found</p>"
              );
            } else {
              // Sort by date (newest first)
              events.sort((a, b) => new Date(b.date) - new Date(a.date));

              events.forEach((event) => {
                addEventCard(event);
              });
            }
          } catch (error) {
            console.error("Error loading events:", error);
            $("#events-container").html(
              "<p class='text-center'>No data found</p>"
            );
          } finally {
            $("#loadingAnimation").hide();
          }
        }

        // Add an event card to the container
        function addEventCard(event) {
          const formattedDate = new Date(event.date).toLocaleDateString(
            "en-US",
            {
              year: "numeric",
              month: "long",
              day: "numeric",
            }
          );

          const eventCard = `
            <div class="col-lg-4 col-md-6">
              <div class="event-card" data-type="${event.coordinator}">
                <img src="${event.picture}" alt="${event.title}" class="event-img">
                <div class="event-content">
                  <h3 class="event-title">${event.title}</h3>
                  <p class="event-date"><i class="ri-calendar-line"></i> ${formattedDate}</p>
                  <p class="event-description">${event.description}</p>
                  <div class="event-footer">
                    <span class="event-department">${event.department}</span>
                    <span class="event-coordinator">Coordinator: ${event.coordinator}</span>
                  </div>
                </div>
              </div>
            </div>
          `;

          $("#events-container").append(eventCard);
        }

        // Reset the form
        function resetForm() {
          $("#eventForm")[0].reset();
          $("#eventImagePreview").hide();
        }
      });
    </script>
  </body>
</html>
